(this["webpackJsonptest-linkener"]=this["webpackJsonptest-linkener"]||[]).push([[0],{116:function(e,a,t){},13:function(e,a,t){"use strict";t.d(a,"a",(function(){return o})),t.d(a,"b",(function(){return i})),t.d(a,"c",(function(){return s}));var n=t(0),r=t.n(n),c=t(22),l=Object(n.createContext)(),o=function(e){var a=e.children,t=Object(c.a)();return r.a.createElement(l.Provider,{value:t},a)},i=function(){return Object(n.useContext)(l)};function s(e){return function(a){var t=i();return r.a.createElement(e,Object.assign({},a,{auth:t}))}}},134:function(e,a,t){"use strict";(function(e){var n=t(0),r=t.n(n),c=t(142),l=t(13),o=t(143);t(331);a.a=Object(c.hot)(e)((function(){return r.a.createElement(l.a,null,r.a.createElement(o.a,null))}))}).call(this,t(150)(e))},139:function(e,a,t){e.exports=t.p+"static/media/trabajo.75e6924d.jpg"},140:function(e,a,t){e.exports=t.p+"static/media/tiempos.abdb574c.jpg"},143:function(e,a,t){"use strict";var n=t(0),r=t.n(n),c=t(10),l=t(37),o=t(2),i=t(8),s=t(17),m=t(18),u=t(20),d=t(19),p=t(21),b=(t(219),t(3)),E=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={email:"",password:"",inciarSesion:!0,loading:!1},t.handleChange=function(e){var a=e.target,n=a.value,r=a.id;t.setState(Object(i.a)({},r,n))},t.handleClick=function(e){var a=t.state,n=a.email,r=a.password;e.preventDefault(),t.setState((function(e){return Object(o.a)({},e,{loading:!0})})),b.c.auth().signInWithEmailAndPassword(n,r).then((function(){t.setState({inciarSesion:!1,loading:!1})})).catch((function(e){"The password is invalid or the user does not have a password."===e.message&&alert("has introducido una contrase\xf1a err\xf3nea o el usuario no tiene contrase\xf1a"),"The email address is badly formatted."===e.message&&alert("El email introducido esta err\xf3neo"),t.setState((function(e){return Object(o.a)({},e,{loading:!1})}))}))},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this.state.inciarSesion;return r.a.createElement("div",{className:"centrarLogin"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Direccion de Email"),r.a.createElement("input",{type:"email",className:"form-control",onChange:this.handleChange,id:"email",placeholder:"email@gmail.com"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Contrase\xf1a"),r.a.createElement("input",{type:"password",className:"form-control",onChange:this.handleChange,id:"password",placeholder:"Escribe tu contrase\xf1a"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.handleClick},e?"Iniciar Sesion":"Cerrar Sesion")))))}}]),a}(n.Component),f=(t(220),function(){return r.a.createElement("div",{className:"loader"},"Loading...")}),v=function(e){var a=e.login;return e.user?r.a.createElement(l.a,{to:"/app"}):r.a.createElement("main",null,a?r.a.createElement(E,null):r.a.createElement(f,null))},h=t(70);var g=function(e){var a=e.children,t=e.authenticated,n=e.routeType,c=e.userType,o=Object(h.a)(e,["children","authenticated","routeType","userType"]),i=t&&function(e){var a=e.routeType,t=e.userType;return"object"===typeof a?a.includes(t):"string"!==typeof a||a===t}({routeType:n,userType:c});return r.a.createElement(l.b,Object.assign({},o,{render:function(e){var t=e.location;return i?a:r.a.createElement(l.a,{to:{pathname:"/",state:{from:t}}})}}))},N=t(7),y=t.n(N),j=t(15),O=t(5),C=t.n(O),k=t(4),w=t.n(k),x=(t(229),function(e){var a=e.nombreNegocio,t=e.handleChange,c=e.nombreGerente,l=e.emailGerente,i=e.telefonoGerente,s=e.modificar,m=e.remove,u=e.handleListaVisitas,d=e.proxAccion,p=e.poblacion,b=e.codigoPostal,E=e.comentarios,f=e.tieneInteres,v=e.listaImagenes,h=e.fields,g=e.visitaFields,N=e.borrando,y=e.loading,j=h.map((function(e){var a=g.find((function(a){return a.id===e.id})),t=e.options.map((function(e){var t=Object(o.a)({},e);return a.values.includes(t.key)&&(t.select=!0),t}));return Object(o.a)({},e,{options:t})}));return console.log(j),r.a.createElement("div",{className:"card activity card-visista"},r.a.createElement("div",{className:"row"},""===v?null:v.map((function(e,a){return r.a.createElement("div",{className:"col-12 col-md-6 precios",key:a},r.a.createElement("img",{src:e.direccion,alt:e.nombreTarjeta,className:"img-thumbnail"}),"/>")}))),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},a),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("p",{className:"card-text"},r.a.createElement("strong",null,"Nombre Gerente:")," ",c),r.a.createElement("p",{className:"card-text"},r.a.createElement("strong",null,"Email:")," ",l),r.a.createElement("p",{className:"card-text"},r.a.createElement("strong",null,"Tel\xe9fono:")," ",i," "),r.a.createElement("p",{className:"card-text"},r.a.createElement("strong",null,"Poblacion:")," ",p),r.a.createElement("p",{className:"card-text"},r.a.createElement("strong",null,"Codigo Postal:")," ",b)),r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("p",null,r.a.createElement("strong",null,"Acci\xf3n \xdaltima:")),r.a.createElement("p",null,"fecha: ",d),r.a.createElement("p",null,"Acci\xf3n: ",E),j.map((function(e){var a=e.id,t=e.title,c=e.options;return r.a.createElement(n.Fragment,{key:a},r.a.createElement("p",{className:"card-text option"},r.a.createElement("strong",null,t,":")),r.a.createElement("ul",null,c.map((function(e){var a=e.key,t=e.name;return e.select?r.a.createElement("li",{key:a},t):null}))))})))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Pr\xf3xima Acci\xf3n"),r.a.createElement("input",{onChange:t,type:"date",className:"form-control",id:"proxAccion",rows:"3"}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Comentarios"),r.a.createElement("textarea",{onChange:t,className:"form-control",defaultValue:E,id:"comentarios",rows:"3"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Posibilidades reales de contrataci\xf3n"),r.a.createElement("select",{onChange:t,className:"form-control",id:"probVenta"},r.a.createElement("option",null,"Muy alta"),r.a.createElement("option",null,"Alta"),r.a.createElement("option",null,"Normal"),r.a.createElement("option",null,"Baja"))),r.a.createElement("label",null,"\xbfTienen Inter\xe9s? Actualmente: ",f),r.a.createElement("select",{onChange:t,className:"form-control",id:"tieneInteres"},r.a.createElement("option",null," "),r.a.createElement("option",null,"Si"),r.a.createElement("option",null,"No"),r.a.createElement("option",null,"No esta la persona que decide"),r.a.createElement("option",null,"No, pero quiere Info")),r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{onChange:t,className:"form-check-input",type:"checkbox",id:"emailEnviado",value:"Si"}),r.a.createElement("label",{className:"form-check-label"}," Email ya enviado ")),r.a.createElement("div",{onChange:t,className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"emailEnviado",value:"No"}),r.a.createElement("label",{className:"form-check-label"}," No, hay que enviarlo")),r.a.createElement("div",{className:"enviarInfo"},r.a.createElement("p",null,r.a.createElement("button",{type:"button",onClick:u,className:"btn btn-light btn-back-visita"},"Volver")),r.a.createElement("button",{type:"button",onClick:s,className:"btn btn-success"},y?r.a.createElement("div",null,"Modificando"," ",r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))):"Modificar"),r.a.createElement("button",{type:"button",onClick:m,className:"btn btn-danger buttonBack"},N?r.a.createElement("div",null,"Borrando..."," ",r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))):"Borrar"))))});function A(e){var a=e.tareas,t=e.handleActuarDia;return r.a.createElement("div",{className:"card precios"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"}," ",a.length," Tareas"),r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},"Estas son tus tareas de hoy:"),r.a.createElement("ul",null,a.map((function(e,a){return r.a.createElement("li",{key:a,id:a,onClick:t,className:"btn-link"},e.nombreNegocio)})))))}t(116);var S=t(13),T=function(e){function a(e){var t;Object(s.a)(this,a),(t=Object(u.a)(this,Object(d.a)(a).call(this,e))).handleListaVisitas=function(){t.setState({verVisitaCompleta:!1})},t.handleChange=function(e){var a=e.target,n=a.value,r=a.id;t.setState(Object(i.a)({},r,n))},t.handleSearch=function(e){var a=e.target.value,n=t.state.data.filter((function(e){var t=a.toLowerCase();return"".concat(e.nombreNegocio.toLowerCase()," ").concat(e.probVenta.toLowerCase()," ").concat(e.fechaProx," ").concat(e.poblacion.toLowerCase()," ").includes(t)}));t.setState({search:n,busqueda:!0})},t.hanldeActuarInformacion=function(e){var a=e.target.id,n=t.state,r=n.data,c=n.busqueda,l=n.search,o=c?l[a]:r[a];t.setState({visitaId:o.id,nombreNegocio:o.nombreNegocio,productoSolicitado:o.productoSolicitado,nombreGerente:o.nombreGerente,comentarios:o.comentarios,proxAccion:o.fechaProx,telefonoGerente:o.telefonoGerente,emailGerente:o.emailGerente,emailEnviado:o.emailEnviado,tienenWeb:o.tienenWeb,tieneInteres:o.tieneInteres,probVenta:o.probVenta,poblacion:o.poblacion,codigoPostal:o.codigoPostal,listaImagenes:o.listaImagenesTarjeta,visitaFields:o.fields,verVisitaCompleta:!0})},t.handleActuarDia=function(e){var a=e.target.id,n=t.state.tareas[a];t.setState({nombreNegocio:n.nombreNegocio,productoSolicitado:n.productoSolicitado,nombreGerente:n.nombreGerente,comentarios:n.comentarios,proxAccion:n.fechaProx,poblacion:n.poblacion,codigoPostal:n.codigoPostal,telefonoGerente:n.telefonoGerente,emailGerente:n.emailGerente,emailEnviado:n.emailEnviado,tienenWeb:n.tienenWeb,probVenta:n.probVenta,tieneInteres:n.tieneInteres,verVisitaCompleta:!0})},t.handleModificar=function(e){e.preventDefault();var a=t.state,n=a.comentarios,r=a.proxAccion,c=a.probVenta,l=a.emailEnviado,o=a.tieneInteres,i=a.visitaId,s={comentarios:n,fechaProx:Number(w()(r).format("x")),emailEnviado:l,tieneInteres:o,probVenta:c},m=Object.keys(s).reduce((function(e,a){return void 0!==s[a]&&(e[a]=s[a]),e}),{});console.log(s,m),b.b.collection("visitas").doc(i).set(m,{merge:!0}).then((function(){t.setState({verVisitaCompleta:!1,guardandoVisita:!1}),C()("Se ha modificado correctamente")})).catch((function(e){t.showError(e)})),t.setState({guardandoVisita:!0})},t.handleRemove=function(e){e.preventDefault();var a=t.state.visitaId;b.b.collection("visitas").doc(a).delete().then((function(){t.setState({verVisitaCompleta:!1,borrandoVisita:!1}),C()("Se ha borrado correctamente")})).catch((function(e){t.showError(e)})),t.setState({borrandoVisita:!0})},t.subscribeVisitas=Object(j.a)(y.a.mark((function e(){var a,n,r,c,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=t.state.auth,n=a.user,r=n.uid,c=n.data.userAdmin,l=b.b.collection("visitas").where("userAdmin","==",c).where("userId","==",r).onSnapshot((function(e){var a=e.docs.map((function(e,a){var t=Object(o.a)({},e.data(),{id:e.id}),n=isNaN(t.fechaProx)?"No tiene":w()(t.fechaProx).format("DD/MM/YYYY");return Object(o.a)({},t,{fechaProx:n})})),n=a.filter((function(e,a){var t=w()().format("DD/MM/YYYY");return e.fechaProx===t}));t.setState({data:a,cargando:!1,tareas:n})})),t.unsubscribes.push(l)}catch(i){t.showError(i)}case 1:case"end":return e.stop()}}),e)}))),t.getDynamicFields=Object(j.a)(y.a.mark((function e(){var a,n,r,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.state.auth,n=a.user.data.userAdmin,e.next=5,b.b.collection("dynamicFields").where("userId","==",n).get();case 5:r=e.sent,c=r.docs.map((function(e){return Object(o.a)({},e.data(),{id:e.id})})),t.setState({dynamicFields:c}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t.showError(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),t.showError=function(e){C()("Error","Erro: ".concat(e),"error")},t.componentDidMount=function(){t.subscribeVisitas(),t.getDynamicFields()},t.componentWillUnmount=function(){t.unsubscribes.forEach((function(e){return e()}))};var n=t.props.auth;return t.unsubscribes=[],t.state={auth:n,data:[],nombreNegocio:"",productoSolicitado:"",comentarios:"",proxAccion:"",nombreGerente:"",emailGerente:"",telefonoGerente:"",tienenWeb:"",probVenta:"",poblacion:"",codigoPostal:"",verVisitaCompleta:!1,cargando:!0,search:[],emailEnviado:"",busqueda:!1,tieneInteres:"",tareas:[],visitaId:"",listaImagenes:[],visitaFields:[],dynamicFields:[],guardandoVisita:!1,borrandoVisita:!1},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this,a=this.state,t=a.search,n=a.nombreNegocio,c=a.productoSolicitado,l=a.proxAccion,o=a.comentarios,i=a.probVenta,s=a.nombreGerente,m=a.emailGerente,u=a.telefonoGerente,d=a.tienenWeb,p=a.tieneInteres,b=a.verVisitaCompleta,E=a.data,v=a.busqueda,h=a.cargando,g=a.tareas,N=a.poblacion,y=a.codigoPostal,j=a.listaImagenes,O=a.visitaFields,C=a.dynamicFields,k=a.guardandoVisita,w=a.borrandoVisita,S=a.auth.user.data.userAdmin,T=v?t:E;return r.a.createElement("div",{className:"col-12 col-md-11"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-9"},b?r.a.createElement(x,{nombreNegocio:n,productoSolicitado:c,proxAccion:l,comentarios:o,nombreGerente:s,emailGerente:m,poblacion:N,codigoPostal:y,telefonoGerente:u,handleChange:this.handleChange,probVenta:i,tienenWeb:d,modificar:this.handleModificar,remove:this.handleRemove,handleListaVisitas:this.handleListaVisitas,tieneInteres:p,listaImagenes:j,visitaFields:O,userId:S,fields:C,loading:k,borrando:w}):r.a.createElement("div",null,r.a.createElement("input",{type:"text",onChange:this.handleSearch,className:"form-control precios",id:"search",placeholder:"Buscar..."}),h?r.a.createElement(f,null):r.a.createElement("table",{className:"table table-sm table-responsive"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"N\xba"),r.a.createElement("th",{scope:"col"},"Negocio"),r.a.createElement("th",{scope:"col"},"Poblaci\xf3n"),r.a.createElement("th",{scope:"col"},"C\xf3digo Postal"),r.a.createElement("th",{scope:"col"},"Pr\xf3xima Acci\xf3n"),r.a.createElement("th",{scope:"col"},"Probabilidad"),r.a.createElement("th",{scope:"col"},"Mail"),r.a.createElement("th",{scope:"col"},"Actuar"))),r.a.createElement("tbody",null,T.map((function(a,t){return r.a.createElement("tr",{key:t},r.a.createElement("th",{scope:"row"},t+1),r.a.createElement("td",null,a.nombreNegocio),r.a.createElement("td",null,a.poblacion),r.a.createElement("td",null,a.codigoPostal),r.a.createElement("td",null,a.fechaProx),r.a.createElement("td",null,a.probVenta),r.a.createElement("td",null,a.emailEnviado),r.a.createElement("td",null,r.a.createElement("button",{type:"button",onClick:e.hanldeActuarInformacion,id:t,className:"btn btn-info btn-sm"},"Actuar")))})))))),r.a.createElement("div",{className:"col-12 col-md-3"},r.a.createElement(A,{tareas:g,handleActuarDia:this.handleActuarDia}))))}}]),a}(n.Component),F=Object(S.c)(T),V=t(38),I=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(u.a)(this,Object(d.a)(a).call(this,e))).handleChange=function(e){if(e.target.files[0]){var a=e.target.files[0];t.handleUpload(a)}},t.handleRemoveFoto=function(e){var a=b.c.storage().ref("/tarjetas");e.preventDefault();var n=t.state.listaImagenes,r=e.target.id,c=n.filter((function(e,a){return a!==parseInt(r)}));t.setState({listaImagenes:c});var l=n[parseInt(r)].nombreContrato;a.child(l).delete().then((function(){C()("Se ha borrado el archivo correctamente")})).catch((function(e){C()("Ohh ha ocurrido un error")}))},t.handleUpload=function(e){var a=b.c.storage().ref("/targetas/".concat(e.name)).put(e);a.on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100,n=e.ref.name;t.setState({uploadValue:a,nombreTarjeta:n})}),(function(e){C()("Ha habido un error, intenta subir la imagen mas tarde")}),(function(){a.snapshot.ref.getDownloadURL().then((function(e){t.setState({imagenSrc:e});var a={nombreTarjeta:t.state.nombreTarjeta,direccion:t.state.imagenSrc},n=t.state.listaImagenes;n.push(a),t.setState({listaImagenes:n})})),C()("El archivo se ha subido perfectamente")}))},t.state={listaImagenes:t.props.listaImagenes,contratoSrc:"",nombreTarjeta:""},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this,a=this.state.listaImagenes;return r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Subir Tarjeta"),r.a.createElement("input",{type:"file",onChange:this.handleChange,className:"form-control-file"})),r.a.createElement("div",{className:"row"},a.map((function(a,t){return r.a.createElement("div",{className:"col-12 col-md-3"},r.a.createElement("div",{className:"card",key:a.nombreTarjeta},r.a.createElement("img",{src:a.direccion,alt:a.nombreTarjeta,className:"img-thumbnail"}),r.a.createElement("button",{id:t,className:"btn btn-danger",onClick:e.handleRemoveFoto},"Borrar")))}))))}}]),a}(n.Component);function P(e){var a=e.data,t=e.handleOnChange,c=a.title,l=a.options,o=a.typeCampo,i=a.id,s=a.required,m=r.a.createElement("h6",null,c," ",s&&"(Requerido)"),u=Object(n.useCallback)((function(e){var a=e.target,n=a.value,r=a.checked;t(e,{value:n,id:i,typeCampo:o,checked:r})}),[i,t,o]);return"multiple"===o?r.a.createElement("div",{className:"mb-2"},m,l.map((function(e){var a=e.key,t=e.name;return r.a.createElement("div",{className:"custom-control custom-checkbox",key:a},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:a,onChange:u,value:a}),r.a.createElement("label",{className:"custom-control-label",htmlFor:a},t))}))):r.a.createElement("div",{className:"mb-2"},m,r.a.createElement("select",{className:"custom-select",onChange:u},r.a.createElement("option",null,"--selecionar--"),l.map((function(e){var a=e.key,t=e.name;return r.a.createElement("option",{key:a,value:a},t)}))))}var D=function(e){function a(e){var t;Object(s.a)(this,a),(t=Object(u.a)(this,Object(d.a)(a).call(this,e))).handleChange=function(e){var a=e.target,n=a.value,r=a.id;"date"===a.type&&console.log(n),t.setState(Object(i.a)({},r,n))},t.handleChangeDynamicFields=function(e,a){var n=t.state.fieldsValues,r=a.id,c=a.checked,l=a.value,i=[].concat(Object(V.a)(n),[a]).filter((function(e,a){var t=e.typeCampo,n=Object(h.a)(e,["typeCampo"]);return("simple"!==t||n.value===l||r!==n.id)&&!("multiple"===t&&r===n.id&&n.value===l&&!c)}));t.setState((function(e){return Object(o.a)({},e,{fieldsValues:i})}))},t.fetchFields=Object(j.a)(y.a.mark((function e(){var a,n,r,c,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.auth,n=null===a||void 0===a?void 0:a.user.data.userAdmin,e.next=4,b.b.collection("dynamicFields").where("userId","==",n).get();case 4:r=e.sent,c=r.docs.map((function(e){return Object(o.a)({},e.data(),{id:e.id})})),l=Object(V.a)(c).sort((function(e,a){return"simple"===e.typeCampo&&"multiple"===a.typeCampo?-1:"simple"===a.typeCampo&&"multiple"===e.typeCampo?1:0})),t.setState((function(e){return Object(o.a)({},e,{fields:l})})),console.log(l);case 9:case"end":return e.stop()}}),e)}))),t.submitInformation=function(e){var a=t.state,n=a.nombreGerente,r=a.telefonoGerente,c=a.emailGerente,l=a.comentarios,o=a.proxAccion,i=a.probVenta,s=a.nombreNegocio,m=a.poblacion,u=a.listaImagenes,d=a.codigoPostal,p=u.length>0?u:"",E=Number(w()(o).format("x")),f=w()().valueOf();e.preventDefault();var v=t.validadeFields();if(""===d)C()("Por favor rellena el codigo postal");else if(""===i)C()("Por favor rellena la probabilidad de Venta");else if(""===m)C()("Por favor rellena la poblacion");else if(""===s)C()("Por favor rellena el nombre del Negocio");else if(v){var h=t.state.auth.user,g=t.state.fieldsValues.reduce((function(e,a){var t=a.id,n=a.value,r=e.find((function(e){return e.id===t}));return r?(r.values.push(n),e):(e.push({values:[n],id:t}),e)}),[]),N={diaVisita:f,fechaProx:E,nombreGerente:n,telefonoGerente:r,emailGerente:c,comentarios:l,probVenta:i,nombreNegocio:s,poblacion:m,codigoPostal:d,emailEnviado:"No",listaImagenesTarjeta:p,userId:h.uid,userAdmin:h.data.userAdmin,fields:g};b.b.collection("visitas").add(N).then((function(e){C()({text:"La Visita se ha a\xf1adido correctamente",timer:900})})).catch((function(e){C()("Error al agregar la visita","Error: ".concat(JSON.stringify(e)),"error")}))}else C()("Por favor rellena los campos de la visita que son requeridos")},t.validadeFields=function(){var e=t.state,a=e.fields,n=e.fieldsValues;return a.filter((function(e){return e.required})).map((function(e){var a=e.id;return!!n.find((function(e){return e.id===a}))})).every((function(e){return e}))};var n=t.props.auth;return t.state={nombreGerente:"",telefonoGerente:"",emailGerente:"",comentarios:"",proxAccion:"",probVenta:"Muy Alta",nombreNegocio:"",poblacion:"",codigoPostal:"",listaImagenes:[],fields:[],fieldsValues:[],auth:n},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){this.fetchFields()}},{key:"render",value:function(){var e=this,a=this.state.fields;return r.a.createElement("form",null,r.a.createElement("div",{className:"card precios"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Datos Principales"),r.a.createElement("label",null,"Nombre de la Empresa"),r.a.createElement("input",{onChange:this.handleChange,type:"text",className:"form-control",id:"nombreNegocio",placeholder:"Escribe el nombre de la empresa",required:!0}),r.a.createElement("label",null,"Poblacion"),r.a.createElement("input",{onChange:this.handleChange,type:"text",className:"form-control",id:"poblacion",placeholder:"Poblacion"}),r.a.createElement("label",null,"Codigo Postal"),r.a.createElement("input",{onChange:this.handleChange,type:"zipCode",className:"form-control",id:"codigoPostal",placeholder:"46000"}))),r.a.createElement("div",{className:"card precios"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Datos de la visita"),r.a.createElement("div",null,a.map((function(a){return r.a.createElement(P,{key:a.id,data:a,handleOnChange:e.handleChangeDynamicFields})}))))),r.a.createElement("div",{className:"card precios"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Datos del Posible Cliente"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Nombre del Gerente"),r.a.createElement("input",{onChange:this.handleChange,type:"text",className:"form-control",id:"nombreGerente",placeholder:"Nombre Gerente"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"T\xe9lefono de Contacto"),r.a.createElement("input",{onChange:this.handleChange,type:"text",className:"form-control",id:"telefonoGerente",placeholder:"Tel\xe9fono"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Correo El\xe9ctr\xf3nico"),r.a.createElement("input",{onChange:this.handleChange,type:"text",className:"form-control",id:"emailGerente",placeholder:"gerente@gerente.com"})))),r.a.createElement("div",{className:"card precios"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Acciones Comerciales Pr\xf3ximas"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Proxima Accion"),r.a.createElement("input",{onChange:this.handleChange,type:"date",className:"form-control",id:"proxAccion",rows:"3"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Comentarios"),r.a.createElement("textarea",{onChange:this.handleChange,className:"form-control",id:"comentarios",rows:"3"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Posibilidades reales de contrataci\xf3n"),r.a.createElement("select",{onChange:this.handleChange,className:"form-control",id:"probVenta"},r.a.createElement("option",null,"Muy alta"),r.a.createElement("option",null,"Alta"),r.a.createElement("option",null,"Normal"),r.a.createElement("option",null,"Baja"))))),r.a.createElement("div",{className:"card precios"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"A\xf1ade la tarjeta de Visita"),r.a.createElement("div",{className:"form-group"},r.a.createElement(I,{listaImagenes:this.state.listaImagenes})))),r.a.createElement("button",{type:"submit",onClick:this.submitInformation,className:"btn btn-success botonSuccess"},"Enviar"))}}]),a}(n.Component),z=Object(S.c)(D),Y=t(6),G=t(69),M=function(e){var a=e.dataEstadisitacaVisitas,t=e.tituloEstadistica,n=e.totales;return r.a.createElement("div",{className:"card activity"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},t),r.a.createElement(G.b,{data:a}),r.a.createElement("p",{className:"totales"},n)))},q=t(22),B=w()().valueOf();function L(){var e,a,t=Object(S.b)().user,c=null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.type,l="admin"===c?t.uid:null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.userAdmin,s=Object(n.useState)({minDate:"",maxDate:B,userFilter:!1}),m=Object(Y.a)(s,2),u=m[0],d=u.minDate,p=u.maxDate,b=u.userFilter,E=m[1],v=Object(q.b)("usersData",["userAdmin","==","admin"===c&&l]),h=Object(Y.a)(v,1)[0],g=Object(n.useCallback)((function(e){var a=e.target,t=a.value,n=a.name,r="date"===a.type?Number(w()(t).format("x")):t;E((function(e){return Object(o.a)({},e,Object(i.a)({},n,r))}))}),[]),N=["visitas",{where:[["userAdmin","==",l],["diaVisita",">=",d||0],["diaVisita","<=",p],"admin"===c&&b&&"false"!==b?["userId","==",b]:void 0,"vendedor"===c?["userId","==",t.uid]:null]}],y=Object(q.b)("dynamicFields",["userId","==",l]),j=Object(Y.a)(y,2),O=j[0],C=j[1],k=q.c.apply(void 0,N),x=Object(Y.a)(k,2),A=x[0],T=x[1],F=O.map((function(e){var a=e.id,t=A.reduce((function(e,t){return t.fields.forEach((function(t){a===t.id&&(e=e.concat(t.values))})),e}),[]),n=e.options.map((function(e){var a=0;return t.forEach((function(t){t===e.key&&a++})),Object(o.a)({},e,{count:a})}));return Object(o.a)({},e,{options:n})})),V=C||T,I=w()(d).format("YYYY-MM-DD"),P=w()(p).format("YYYY-MM-DD");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card precios"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h2",{className:"card-title"},"Filtar Visitas"),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col-md-6 mb-3"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-2 col-form-label"},"Desde"),r.a.createElement("div",{className:"col-10"},r.a.createElement("input",{name:"minDate",className:"form-control",type:"date",value:I,onChange:g}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-2 col-form-label"},"Hasta"),r.a.createElement("div",{className:"col-10"},r.a.createElement("input",{name:"maxDate",className:"form-control",type:"date",value:P,onChange:g})))),"admin"===c&&r.a.createElement("div",{className:"col-md-6 mb-3"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-2 col-form-label"},"Usuario"),r.a.createElement("div",{className:"col-10"},r.a.createElement("select",{className:"custom-select",name:"userFilter",value:b,onChange:g},r.a.createElement("option",{value:"false"},"Todos los usuarios"),h.map((function(e){var a=e.name,t=e.id,n=e.email;return r.a.createElement("option",{key:t,value:t},a," - ",n)}))))))))))),r.a.createElement("div",{className:"row"},V&&r.a.createElement(f,null),F.length>0?F.map((function(e){var a=e.id,t=e.title,n=e.options,c=[],l=[];n.forEach((function(e){var a=e.name,t=e.count;c.push(a),l.push(t)}));var o=n.reduce((function(e,a){return e+a.count}),0),i={labels:c,datasets:[{data:l,backgroundColor:["#F0EDED","#36A2EB","#FFCE56","#605C5A","#EB0F13"],hoverBackgroundColor:["#DFC5C5","#36A2EB","#FFCE56","#4B0607"]}]};return r.a.createElement("div",{className:"col-12 col-md-6",key:a},r.a.createElement(M,{tituloEstadistica:"Total de ".concat(t),dataEstadisitacaVisitas:i,totales:"Total: ".concat(o)}))})):r.a.createElement("div",null,r.a.createElement("p",null,"No hay visitas que mostrar"))))}t(320);var R=function(e){var a=e.image,t=e.titleActivity,n=e.descriptionActivity,l=e.buttonActivity,o=e.direction;return r.a.createElement("div",{className:"card activity"},r.a.createElement("img",{src:a,className:"card-img-top imagesActivity",alt:"presupuestos"}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},t),r.a.createElement("p",{className:"card-text"},n),r.a.createElement(c.b,{to:o,className:"btn btn-primary"},l)))},H=t(96),W=t.n(H),J=t(97),U=t.n(J),_=t(98),K=t.n(_),$=t(139),Q=t.n($),X=t(140),Z=t.n(X);function ee(e){var a=e.userName;return r.a.createElement("nav",{className:"navbar navbar-dark headerNav"},r.a.createElement("span",{className:"user"},a),r.a.createElement("button",{onClick:function(e){b.c.auth().signOut().then((function(){C()({text:"El usuario se ha desconectado correctamente.",timer:900})})).catch((function(e){console.log(e)}))},className:"btn btn-sm btn-outline-danger",type:"button"},"Cerrar Sesion"))}var ae=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-4"},r.a.createElement(R,{image:U.a,titleActivity:"Haz Visita.",descriptionActivity:"Aqu\xed vas a apuntar de forma r\xe1pida las visitas que estas realizando",buttonActivity:"Visita",direction:"./Visitas"})),r.a.createElement("div",{className:"col-12 col-md-4"},r.a.createElement(R,{image:W.a,titleActivity:"Gestion de Visitas",descriptionActivity:"Recuerda todo el trabajo realizado y adem\xe1s haz un buen seguimiento",buttonActivity:"Gestiona",direction:"./gestion"})),r.a.createElement("div",{className:"col-12 col-md-4"},r.a.createElement(R,{image:K.a,titleActivity:"Estad\xedsticas",descriptionActivity:"Analiza las visitas que estas realizando para analizar lo que consigues",buttonActivity:"Analizar",direction:"/estadisticas"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-4"},r.a.createElement(R,{image:Q.a,titleActivity:"Fichar",descriptionActivity:"Ficha tu trabajo",buttonActivity:"Fichar",direction:"/fichar"})),r.a.createElement("div",{className:"col-12 col-md-4"},r.a.createElement(R,{image:Z.a,titleActivity:"Ver Trabajo",descriptionActivity:"Visualiza el trabajo realizado",buttonActivity:"Ver",direction:"/trabajorealizado"}))))},te=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-4"},r.a.createElement(R,{image:U.a,titleActivity:"Configuraci\xf3n",descriptionActivity:"Configuraciones Generales",buttonActivity:"Configuraci\xf3n",direction:"./configuracion"})),r.a.createElement("div",{className:"col-12 col-md-4"},r.a.createElement(R,{image:W.a,titleActivity:"Administrar Vendedores",descriptionActivity:"Agrega, modficia o eliminia vendedores.",buttonActivity:"Vendedores",direction:"./vendedores"})),r.a.createElement("div",{className:"col-12 col-md-4"},r.a.createElement(R,{image:K.a,titleActivity:"Estad\xedsticas",descriptionActivity:"Analiza las visitas que estas realizando para analizar lo que consigues",buttonActivity:"Analizar",direction:"/estadisticas"}))))};function ne(e){var a=e.userType;return r.a.createElement("div",null,r.a.createElement(ee,{userName:"Carlos Raez"}),r.a.createElement("div",{className:"container"},"vendedor"===a&&r.a.createElement(ae,null),"admin"===a&&r.a.createElement(te,null)))}function re(e){var a=e.fichajesSinParar,t=e.handleClickParar;return r.a.createElement("div",{className:"card visualizacion"},r.a.createElement("div",{className:"card-body"},r.a.createElement("table",{className:"table table-sm responsive"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"N\xba"),r.a.createElement("th",{scope:"col"},"Actividad"),r.a.createElement("th",{scope:"col"},"Hora de Comienzo"),r.a.createElement("th",{scope:"col"},"Tiempo"),r.a.createElement("th",{scope:"col"},"Estado"),r.a.createElement("th",{scope:"col"},"Parar"))),r.a.createElement("tbody",null,a.map((function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("th",{scope:"row"},a+1),r.a.createElement("td",null,e.actividad),r.a.createElement("td",null,e.comienzoFormated),r.a.createElement("td",null,e.duracionFormated),r.a.createElement("td",null,e.estado),r.a.createElement("td",null,r.a.createElement("button",{type:"button",id:a,onClick:function(){return t(e.id)},className:"btn btn-sm btn-primary"},"Parar")))}))))))}var ce=function(e){var a=e.listaTerminado,t=e.tiempoTotalDia;return r.a.createElement("div",{className:"card visualizacion"},r.a.createElement("div",{className:"card-body"},r.a.createElement("table",{className:"table table-sm responsive"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"N\xba"),r.a.createElement("th",{scope:"col"},"Actividad"),r.a.createElement("th",{scope:"col"},"Hora de Comienzo"),r.a.createElement("th",{scope:"col"},"Tiempo Total"),r.a.createElement("th",{scope:"col"},"Hora de Finalizacion"))),r.a.createElement("tbody",null,a.map((function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("th",{scope:"row"},a+1),r.a.createElement("td",null,e.actividad),r.a.createElement("td",null,e.comienzoFormated),r.a.createElement("td",null,e.duracionFormated),r.a.createElement("td",null,e.paradoFormated))})),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Totales"),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,t),r.a.createElement("td",null))))))},le=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={data:[],tiempoFormacion:t.props.tiempoFormacion,tiempoVentas:t.props.tiempoVentas,tiempoOficina:t.props.tiempoOficina,tiempoProgramacion:t.props.tiempoProgramacion,tiempoTotalDia:t.props.tiempoTotalDia,dataEstadisitacaVisitas:{labels:["Ventas","Oficina","Programacion","Formacion"],datasets:[{data:[t.props.tiempoVentasEstadistica,t.props.tiempoOficinaEstadistica,t.props.tiempoProgramacionEstadistica,t.props.tiempoFormacionEstadistica],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#EB0F13"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","#4B0607"]}]}},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this.state,a=e.dataEstadisitacaVisitas,t=e.tiempoTotalDia,n=e.tiempoFormacion,c=e.tiempoProgramacion,l=e.tiempoVentas,o=e.tiempoOficina;return r.a.createElement("div",{className:"card activity"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Tu trabajo de hoy"),r.a.createElement("p",null,r.a.createElement("strong",null,"Oficina:")," ",o),r.a.createElement("p",null,r.a.createElement("strong",null,"Ventas:")," ",l),r.a.createElement("p",null,r.a.createElement("strong",null,"Programaci\xf3n:")," ",c),r.a.createElement("p",null,r.a.createElement("strong",null,"Formaci\xf3n:")," ",n),r.a.createElement(G.a,{data:a}),r.a.createElement("p",{className:"totales"},t)))}}]),a}(n.Component),oe=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(u.a)(this,Object(d.a)(a).call(this,e))).componentDidMount=function(){t.subscribeTrabajos(),t.subscribeTrabajosTerminados()},t.handleClickParar=function(e){var a=t.state.listaTrabajo.find((function(a){return a.id===e})),n=Number(w()().format("x")),r=n-a.comienzo;window.navigator.geolocation.getCurrentPosition((function(a){var c={parado:n,duracion:r,estado:"Terminado",lugarTerminado:{longitude:a.coords.longitude,latitude:a.coords.latitude}};b.b.collection("fichajes").doc(e).set(c,{merge:!0}).then((function(){C()("El trabajo se ha Parado correctamente")})).catch((function(e){t.showError(e)}))}))},t.submitInformation=function(e){e.preventDefault();var a=t.state,n=a.listaTrabajo,r=a.auth;if(0===n.length){var c=r.user.uid,l=Number(w()().format("x")),o=w()(w()().format("YYYY/MM/DD")).valueOf();window.navigator.geolocation.getCurrentPosition((function(e){var a=t.state.actividad,n={userId:c,dia:o,actividad:a,comienzo:l,parado:0,duracion:0,estado:"Trabajando",lugarEmpezado:{longitude:e.coords.longitude,latitude:e.coords.latitude}};b.b.collection("fichajes").add(n).then((function(){C()("Trabajo a\xf1adido correctamemnte")})).catch((function(e){t.showError(e)}))}))}else C()("Ya tienes un trabajo en marcha, primero finaliza tu trabajo")},t.showError=function(e){C()("Error","Error: ".concat(JSON.stringify(e)),"error")},t.handleChange=function(e){var a=e.target,n=a.value,r=a.id;t.setState(Object(i.a)({},r,n))},t.subscribeTrabajos=function(){var e=t.state.auth.user.uid;t.setState({cargandoTrabajos:!0});var a=w()(w()().format("YYYY/MM/DD")).valueOf(),n=b.b.collection("fichajes").where("userId","==",e).where("estado","==","Trabajando").where("dia","<=",a).onSnapshot((function(e){var a=e.docs.map((function(e){var a=Object(o.a)({},e.data()),t=w()(a.comienzo).format("HH:mm"),n=w()().valueOf()-a.comienzo,r=w.a.duration(n),c="".concat(r.hours()," horas y ").concat(r.minutes()," minutos.");return Object(o.a)({},a,{id:e.id,comienzoFormated:t,duracionFormated:c})}));t.setState({listaTrabajo:a,cargandoTrabajos:!1})}));t.subscriptions.push(n)},t.subscribeTrabajosTerminados=function(){var e=t.state.auth.user.uid,a=w()(w()().format("YYYY/MM/DD")).valueOf();console.log(a),t.setState({cargandoTerminados:!0});var n=b.b.collection("fichajes").where("userId","==",e).where("estado","==","Terminado").where("dia",">=",a).onSnapshot((function(e){var a=e.docs.map((function(e){var a=Object(o.a)({},e.data()),t=w()(a.comienzo).format("HH:mm"),n=w()(a.parado).format("HH:mm"),r=w()().valueOf()-a.comienzo,c=w.a.duration(r),l="".concat(c.hours()," horas y ").concat(c.minutes()," minutos.");return Object(o.a)({},a,{id:e.id,comienzoFormated:t,duracionFormated:l,paradoFormated:n})}));t.setState({listaTerminado:a,cargandoTerminados:!1})}));t.subscriptions.push(n)},t.subscriptions=[],t.state={auth:t.props.auth,actividad:"Oficina",cargandoTrabajos:!1,cargandoTerminados:!1,listaTrabajo:[],listaTerminado:[]},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){e()}))}},{key:"render",value:function(){var e=this.state,a=e.listaTrabajo,t=e.cargandoTerminados,n=e.cargandoTrabajos,c=e.listaTerminado,l=n||t,s=c.reduce((function(e,a){var t=a.duracion,n=a.actividad,r=e.total+t,c=e[n]+t;return Object(o.a)({},e,Object(i.a)({total:r},n,c))}),{Oficina:0,Venta:0,Formacion:0,Programar:0,total:0}),m=Object.keys(s).reduce((function(e,a){var t=s[a],n=w.a.duration(t),r=Math.round(n.asMinutes());return Object(o.a)({},e,Object(i.a)({},a,r))}),{}),u=Object.keys(s).reduce((function(e,a){var t=s[a],n=w.a.duration(t),r="".concat(n.hours()," horas y ").concat(n.minutes()," minutos.");return Object(o.a)({},e,Object(i.a)({},a,r))}),{}),d=u.total,p=u.Formacion,b=u.Oficina,E=u.Venta,v=u.Programar,h=m.Venta,g=m.Formacion,N=m.Oficina,y=m.Programar;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Actividad"),r.a.createElement("select",{onChange:this.handleChange,className:"form-control",id:"actividad"},r.a.createElement("option",null,"Oficina"),r.a.createElement("option",null,"Venta"),r.a.createElement("option",null,"Formacion"),r.a.createElement("option",null,"Programar"))),r.a.createElement("button",{type:"submit",onClick:this.submitInformation,className:"btn btn-success"},"Fichar"),l?r.a.createElement(f,null):r.a.createElement("div",null,r.a.createElement(re,{usuario:"Carlos Raez",fichajesSinParar:a,handleClickParar:this.handleClickParar}),r.a.createElement(ce,{usuario:"Carlos Raez",listaTerminado:c,handleClickParar:this.handleClickParar,tiempoTotalDia:d}),r.a.createElement(le,{tiempoProgramacionEstadistica:y,tiempoOficinaEstadistica:N,tiempoFormacionEstadistica:g,listaTerminado:c,tiempoTotalDia:d,tiempoFormacion:p,tiempoOficina:b,tiempoProgramacion:v,tiempoVentas:E,tiempoVentasEstadistica:h})))}}]),a}(n.Component),ie=Object(S.c)(oe),se=function(e){var a=e.listaTrabajoSeleccionado,t=e.tiempoTotalDia;return r.a.createElement("div",{className:"card visualizacion"},r.a.createElement("div",{className:"card-body"},r.a.createElement("table",{className:"table table-sm responsive"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Dia"),r.a.createElement("th",{scope:"col"},"Actividad"),r.a.createElement("th",{scope:"col"},"Hora de Comienzo"),r.a.createElement("th",{scope:"col"},"Tiempo Total"),r.a.createElement("th",{scope:"col"},"Hora de Finalizacion"),r.a.createElement("th",{scope:"col"},"Mapa"))),r.a.createElement("tbody",null,a.map((function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("th",{scope:"row"},e.dia),r.a.createElement("td",null,e.actividad),r.a.createElement("td",null,e.comienzo),r.a.createElement("td",null,e.duracion),r.a.createElement("td",null,e.parado),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-primary btn-sm"},"Mapa")))})),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Totales"),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,t),r.a.createElement("td",null))))))},me=function(e){var a=w.a.duration(e);return"".concat(a.hours()," horas y ").concat(a.minutes()," minutos.")};function ue(){var e=Object(S.b)().user.uid,a=Object(n.useState)([]),t=Object(Y.a)(a,2),c=t[0],l=t[1],s=Object(n.useState)(!1),m=Object(Y.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)({fechaInicio:"",fechaFin:""}),E=Object(Y.a)(p,2),v=E[0],h=v.fechaFin,g=v.fechaInicio,N=E[1],y=Object(n.useCallback)((function(e){var a=e.target,t=a.value,n=a.name,r=w()(t).valueOf();N((function(e){return Object(o.a)({},e,Object(i.a)({},n,r))}))}),[]),j=Object(n.useCallback)((function(a){a&&a.preventDefault();var t=""===g?0:g,n=""===h?w()(w()().format("YYYY-MM-DD")).valueOf():g;d(!0),b.b.collection("fichajes").where("userId","==",e).where("dia",">=",t).where("dia","<=",n).get().then((function(e){d(!1);var a=e.docs.map((function(e){var a=Object(o.a)({},e.data(),{id:e.id}),t=w()(a.comienzo).format("HH:mm"),n=w()(a.parado).format("HH:mm"),r=me(a.duracion),c=w()(a.dia).format("DD/MM/YYYY");return Object(o.a)({},a,{comienzo:t,parado:n,dia:c,duracion:r,duracionNum:a.duracion})}));l(a)}))}),[g,h,e]);Object(n.useEffect)((function(){j()}),[j]);var O=w()(h).format("YYYY-MM-DD"),C=w()(g).format("YYYY-MM-DD"),k=c.reduce((function(e,a){return e+a.duracionNum}),0),x=me(k);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card visualizacion"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Escoje un rango de fechas"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("form",{className:"form-inline"},r.a.createElement("div",{className:"form-group mr-3"},r.a.createElement("input",{type:"date",onChange:y,className:"form-control",name:"fechaInicio",value:C})),r.a.createElement("div",{className:"form-group mr-3"},r.a.createElement("input",{type:"date",onChange:y,className:"form-control",name:"fechaFin",value:O})),r.a.createElement("button",{type:"button",onClick:j,className:"btn btn-primary"},"Enviar"))),r.a.createElement("div",{className:"col-12 col-md-6"})))),u?r.a.createElement(f,null):r.a.createElement(se,{listaTrabajoSeleccionado:c,tiempoTotalDia:x}))}function de(){var e,a=Object(S.b)().user,t=null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.type;return r.a.createElement("nav",{className:"navbar navbar-collapse"},r.a.createElement("ul",{className:"nav flex-column"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"./app",className:"btn btn-link"},"Inicio")),"vendedor"===t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"./visitas",className:"btn btn-link"},"Visitas")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/gestion",className:"btn btn-link"},"Gestionar Visitas")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/fichar",className:"btn btn-link"},"Fichar")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/trabajorealizado",className:"btn btn-link"},"Trabajo Realizado")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/estadisticas",className:"btn btn-link"},"Estad\xedsticas"))),"admin"===t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"./configuracion",className:"btn btn-link"},"Configuraci\xf3n")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"./vendedores",className:"btn btn-link"},"Vendedores")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/estadisticas",className:"btn btn-link"},"Estad\xedsticas")))))}function pe(e){var a=e.children;return r.a.createElement("div",null,r.a.createElement(ee,{userName:"Carlos Raez"}),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-2 lateralBar"},r.a.createElement(de,null)),r.a.createElement("div",{className:"col-12 col-md-10 pb-5"},a))))}t(321);var be=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(u.a)(this,Object(d.a)(a).call(this,e))).handleChange=function(e){var a=e.target,n=a.value,r=a.id;t.setState(Object(i.a)({},r,n))},t.handleClick=function(){var e=Object(j.a)(y.a.mark((function e(a){var n,r,c,l,o,i,s,m,u,d,p;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,r=n.email,c=n.password,l=n.password2,o=n.userAdmin,i=n.name,c===l){e.next=4;break}return C()("Las contrasenas deben coincidir"),e.abrupt("return");case 4:if(a.preventDefault(),!b.c.auth().isSignInWithEmailLink(window.location.href)){e.next=27;break}return e.prev=6,e.next=9,b.c.auth().signInWithEmailLink(r,window.location.href);case 9:if(s=e.sent,!(m=s.user)){e.next=22;break}return e.next=14,m.delete();case 14:return e.next=16,b.c.auth().createUserWithEmailAndPassword(r,c);case 16:return u=e.sent,d=u.user,p=d.email,e.next=21,b.b.collection("usersData").doc(d.uid).set({type:"vendedor",userAdmin:o,email:p,name:i});case 21:t.setState({signed:!0});case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(6),C()("Error al registar el usuario","Error: ".concat(JSON.stringify(e.t0)),"error");case 27:case"end":return e.stop()}}),e,null,[[6,24]])})));return function(a){return e.apply(this,arguments)}}(),t.state={email:"",password:"",password2:"",inciarSesion:!0,userAdmin:null,signed:!1},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=window.location.search,a=new URLSearchParams(e).get("userAdmin");this.setState({userAdmin:a})}},{key:"render",value:function(){var e=this.state,a=e.inciarSesion,t=e.signed;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement(l.a,{to:"/app"}):r.a.createElement("div",{className:"centrarLogin"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Nombre"),r.a.createElement("input",{type:"email",className:"form-control",onChange:this.handleChange,id:"name",placeholder:"email@gmail.com"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Direccion de Email"),r.a.createElement("br",null),r.a.createElement("small",null,"El email debe ser el mismo que el del correo"),r.a.createElement("input",{type:"email",className:"form-control",onChange:this.handleChange,id:"email",placeholder:"email@gmail.com"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Contrase\xf1a"),r.a.createElement("input",{type:"password",className:"form-control",onChange:this.handleChange,id:"password",placeholder:"Escribe tu contrase\xf1a"}),r.a.createElement("label",null,"Repite la Contrase\xf1a"),r.a.createElement("input",{type:"password",className:"form-control",onChange:this.handleChange,id:"password2",placeholder:"Escribe tu contrase\xf1a"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.handleClick},a?"Iniciar Sesion":"Cerrar Sesion")),r.a.createElement("div",null)))))}}]),a}(n.Component);t(322);function Ee(e){var a=e.data,t=e.i,n=a.name,c=a.email;a.uid;return r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},t),r.a.createElement("td",null,n),r.a.createElement("td",null,c),r.a.createElement("td",null,r.a.createElement("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:function(){}},"Eliminar")))}function fe(e){var a=e.users;return a.length>0?a.map((function(e,a){return r.a.createElement(Ee,{key:e.uid,i:a+1,data:e})})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4"},r.a.createElement("div",{className:"vendedores-cangardo"},"No se han encontrado usuarios")))}var ve=function(){var e=Object(j.a)(y.a.mark((function e(a){var t,n,r,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.c.auth().fetchProvidersForEmail(a);case 2:if(t=e.sent,n=Object(Y.a)(t,1),!n[0]){e.next=8;break}return C()("Error","El email ya esta registrado","error"),e.abrupt("return");case 8:r=b.c.auth().currentUser,c=Object(o.a)({},b.a,{url:"".concat(b.a.url,"?userAdmin=").concat(r.uid)}),b.c.auth().sendSignInLinkToEmail(a,c).then((function(){C()({text:"Email para que usurario se registre ha sido enviado exitosamente",timer:1500})})).catch((function(e){console.log(e),C()("Error al enviar el email al nuevo usuario","Error: ".concat(JSON.stringify(e)),"error")}));case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();function he(){var e=Object(n.useState)(""),a=Object(Y.a)(e,2),t=a[0],c=a[1],l=Object(n.useRef)(),o=Object(n.useCallback)((function(e){var a=e.target.value;c(a)}),[]),i=Object(n.useCallback)((function(){l.current.matches(":valid")||(""===t?C()("Email invalido","El campo no puede estar vacio","error"):C()("Email invalido","".concat(t,"  no corresponde con un formato de email valido"),"error")),ve(t)}),[t,l]),s=Object(q.a)().user,m=Object(q.d)(s.uid),u=m.users,d=m.loading;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card precios"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h2",null,"Administra los Vendedores"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group add-vendedor"},r.a.createElement("input",{className:"form-control add-vendedor__input",type:"email",ref:l,value:t,onChange:o,placeholder:"Ingresa el correo del vendedor",required:!0}),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:i},"Agregar usuario"))),r.a.createElement("div",null,r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"Nombre"),r.a.createElement("th",{scope:"col"},"Email"),r.a.createElement("th",{scope:"col"},"Acciones"))),r.a.createElement("tbody",null,d?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4"},r.a.createElement("div",{className:"vendedores-cangardo"},"Cargando usuarios...",r.a.createElement(f,null)))):r.a.createElement(fe,{users:u}))))))))}var ge=t(141),Ne=t.n(ge);function ye(e){var a=e.onClick;return r.a.createElement("button",{type:"button",style:{position:"absolute",top:"1rem",right:"1rem"},className:"btn btn-outline-danger btn-sm",onClick:a},r.a.createElement("span",null,"\xd7"))}var je=t(336),Oe=function(e){var a=e.title,t=e.options,n=[],r="";(""===a&&(n.push(!1),r+=" El titulo no puede estar vacio."),t.length<=0)?(n.push(!1),r+=" Debes agregar opciones."):t.map((function(e){return""!==e.name})).every((function(e){return e}))||(n.push(!1),r+=" las opciones no pueden estar vacias.");return n.length>0?{isValid:!1,messages:r}:{isValid:!0}};function Ce(e){var a=e.field,t=e.closeModal,c=e.user,l=a||{title:"",typeCampo:"simple",required:!0,date:null,options:[]},s=Object(n.useState)(!1),m=Object(Y.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)(l),E=Object(Y.a)(p,2),f=E[0],v=E[1],h=Object(n.useCallback)((function(e){var a=e.target,t="checkbox"===a.type?a.checked:a.value;v((function(e){return Object(o.a)({},e,Object(i.a)({},a.name,t))}))}),[]),g=Object(n.useCallback)((function(){var e={key:Object(je.a)(),name:"",active:!0},a=Object(V.a)(f.options);a.push(e),v((function(e){return Object(o.a)({},e,{options:a})}))}),[f.options]),N=Object(n.useCallback)((function(e){var a=f.options.filter((function(a){return a.key!==e}));v((function(e){return Object(o.a)({},e,{options:a})}))}),[f.options]),O=Object(n.useCallback)((function(e,a){var t=f.options.map((function(t){return t.key===a?Object(o.a)({},t,{name:e,active:!0}):Object(o.a)({},t,{active:!1})}));v((function(e){return Object(o.a)({},e,{options:t})}))}),[f.options]),k=Object(n.useRef)();Object(n.useEffect)((function(){k.current&&k.current.focus()}),[f.options]);var x=Object(n.useCallback)(Object(j.a)(y.a.mark((function e(){var n,r,l,i,s,m;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Oe(f)).isValid){e.next=4;break}return C()("Error al guardar","".concat(n.messages),"error"),e.abrupt("return");case 4:return r=a?a.id:Object(je.a)(),l=!1,e.prev=6,d(!0),i=f.options.map((function(e){return{name:e.name,key:e.key}})),s=f.date?f.date:w()().valueOf(),m=Object(o.a)({},f,{userId:c.uid,options:i,date:s}),e.next=13,b.b.collection("dynamicFields").doc(r).set(m);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),l=!0,C()("Error al guardar","Error: ".concat(JSON.stringify(e.t0)),"error");case 19:d(!1),l||t();case 21:case"end":return e.stop()}}),e,null,[[6,15]])}))),[f,c,a,t]);return r.a.createElement("div",null,r.a.createElement("h2",null,a?"Editar campo":"Agregar un campo nuevo"),r.a.createElement("div",{className:"form-group mb-4"},r.a.createElement("input",{className:"form-control",name:"title",type:"text",placeholder:"Titulo...",onChange:h,value:f.title})),r.a.createElement("div",{className:"form-group mb-4"},r.a.createElement("h3",null,"Tipo de campo"),r.a.createElement("div",{className:"custom-control custom-radio"},r.a.createElement("input",{type:"radio",id:"customRadio1",name:"typeCampo",className:"custom-control-input",value:"multiple",onChange:h,checked:"multiple"===f.typeCampo}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"customRadio1"},"Multiple seleccion")),r.a.createElement("div",{className:"custom-control custom-radio"},r.a.createElement("input",{type:"radio",id:"customRadio2",name:"typeCampo",value:"simple",className:"custom-control-input",onChange:h,checked:"simple"===f.typeCampo}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"customRadio2"},"Solo un elemeneto selecionable"))),r.a.createElement("div",{className:"custom-control custom-switch"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"customSwitch1",name:"required",checked:f.required,onChange:h}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"customSwitch1"},"Requerido")),r.a.createElement("div",{className:"form-group mb-4",style:{minHeight:"270px"}},r.a.createElement("h3",null,"Opciones"),r.a.createElement("ul",null,f.options.map((function(e){var a=e.key,t=e.name,n=e.active?k:null;return r.a.createElement("li",{key:a},r.a.createElement("div",{className:"col-auto",style:{position:"relative"}},r.a.createElement("input",{type:"text",ref:n,suppressContentEditableWarning:!0,className:"form-control mb-2 form-control-sm",style:{display:"inline-block",width:"auto",minWidth:"160px"},placeholder:"Opcion...",onChange:function(e){var t=e.target;return O(t.value,a)},value:t}),r.a.createElement("button",{type:"button",className:"btn btn-outline-danger btn-sm ml-2",onClick:function(){return N(a)}},r.a.createElement("span",null,"\xd7"))))})),r.a.createElement("li",null,r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{className:"btn btn-secondary btn-sm",type:"button",onClick:g},"+"))))),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("button",{className:"btn btn-primary btn-lg d-inline-flex align-items-center",type:"button",onClick:x},u?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"cargando... "),r.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))):"Guardar")))}function ke(e){var a=e.data,t=e.i,c=e.edit,l=a.id,o=a.title,i=a.options,s=Object(n.useCallback)((function(){c(l)}),[l,c]),m=Object(n.useCallback)(Object(j.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.b.collection("dynamicFields").doc(l).delete();case 3:C()("Campo eliminado"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),C()("Error al eliminar campo","Error: ".concat(e.t0),"error");case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),[l]);return r.a.createElement("tr",null,r.a.createElement("td",null,t),r.a.createElement("td",null,o),r.a.createElement("td",null,i.length),r.a.createElement("td",null,r.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-info mr-3",onClick:s},r.a.createElement("span",null,"Editar")),r.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:m},r.a.createElement("span",null,"\xd7"))))}function we(e){var a=e.fields,t=e.edit;return a.length<=0?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4"},r.a.createElement("div",{className:"vendedores-cangardo"},"No se han encontrado campos"))):a.map((function(e,a){return r.a.createElement(ke,{key:e.id,data:e,i:a+1,edit:t})}))}function xe(){var e=Object(n.useState)(!1),a=Object(Y.a)(e,2),t=a[0],c=a[1],l=Object(q.a)().user,o=Object(n.useState)(null),i=Object(Y.a)(o,2),s=i[0],m=i[1],u=Object(q.b)("dynamicFields",["userId","==",l.uid]),d=Object(Y.a)(u,2),p=d[0],b=d[1],E=Object(n.useCallback)((function(e){var a=p.find((function(a){return a.id===e}));m(a),c(!0)}),[p]),v=Object(n.useCallback)((function(){m(null),c(!0)}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card precios"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h2",null,"Configura las visitas"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"Titulo"),r.a.createElement("th",{scope:"col"},"Opciones"),r.a.createElement("th",{scope:"col"},"Acciones"))),r.a.createElement("tbody",null,b?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4"},r.a.createElement("div",{className:"vendedores-cangardo"},"Cargando campos...",r.a.createElement(f,null)))):r.a.createElement(we,{fields:p,edit:E}))),r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:v},"Agregar campo"))))),r.a.createElement(Ne.a,{isOpen:t,appElement:document.getElementById("root")},r.a.createElement(ye,{onClick:function(){return c(!t)}}),r.a.createElement(Ce,{closeModal:function(){return c(!t)},user:l,field:s})))}a.a=function(){var e,a=Object(S.b)(),t=a.authenticated,n=a.login,o=a.user,i=a.loading,s=null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.type;return i?r.a.createElement("main",null,r.a.createElement(f,null)):r.a.createElement(c.a,null,r.a.createElement("div",null,r.a.createElement(l.d,null,r.a.createElement(g,{exact:!0,path:"/visitas",authenticated:t,routeType:["vendedor"],userType:s},r.a.createElement(pe,null,r.a.createElement(z,null))),r.a.createElement(g,{exact:!0,path:"/estadisticas",authenticated:t,routeType:["vendedor","admin"],userType:s},r.a.createElement(pe,null,r.a.createElement(L,null))),r.a.createElement(g,{exact:!0,path:"/gestion",authenticated:t,routeType:["vendedor"],userType:s},r.a.createElement(pe,null,r.a.createElement(F,null))),r.a.createElement(g,{exact:!0,path:"/fichar",authenticated:t,routeType:["vendedor"],userType:s},r.a.createElement(pe,null,r.a.createElement(ie,null))),r.a.createElement(g,{exact:!0,path:"/trabajorealizado",authenticated:t,routeType:["vendedor"],userType:s},r.a.createElement(pe,null,r.a.createElement(ue,null))),r.a.createElement(g,{exact:!0,path:"/vendedores",authenticated:t,routeType:["admin"],userType:s},r.a.createElement(pe,null,r.a.createElement(he,null))),r.a.createElement(g,{exact:!0,path:"/configuracion",authenticated:t,routeType:["admin"],userType:s},r.a.createElement(pe,null,r.a.createElement(xe,null))),r.a.createElement(g,{exact:!0,path:"/app",authenticated:t,userType:s},r.a.createElement(ne,{userType:s})),r.a.createElement(l.b,{exact:!0,path:"/"},r.a.createElement(v,{login:n,user:o})),r.a.createElement(l.b,{exact:!0,path:"/signup"},r.a.createElement(be,null)),r.a.createElement(l.b,null,r.a.createElement("main",null,"no encontrado")))))}},144:function(e,a,t){e.exports=t(333)},149:function(e,a,t){},219:function(e,a,t){},22:function(e,a,t){"use strict";t.d(a,"a",(function(){return u})),t.d(a,"d",(function(){return d})),t.d(a,"b",(function(){return p})),t.d(a,"c",(function(){return b}));var n=t(38),r=t(7),c=t.n(r),l=t(2),o=t(15),i=t(6),s=t(0),m=t(3),u=function(){var e=Object(s.useState)({login:!1,user:!1,authenticated:!1,loading:!0}),a=Object(i.a)(e,2),t=a[0],n=a[1],r=t.login,u=t.user,d=t.authenticated,p=t.loading;return Object(s.useEffect)((function(){return m.c.auth().onAuthStateChanged(function(){var e=Object(o.a)(c.a.mark((function e(a){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=8;break}return e.next=3,m.b.collection("usersData").doc(a.uid).get();case 3:t=e.sent,r=t.exists?t.data():{},n({login:!1,user:Object(l.a)({},a,{data:r}),authenticated:!0,loading:!1}),e.next=10;break;case 8:n({login:!0,authenticated:!1,loading:!1}),console.log("no hay usuario");case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())}),[]),{login:r,user:u,authenticated:d,setAuth:n,loading:p}},d=function(e){var a=Object(s.useState)([]),t=Object(i.a)(a,2),n=t[0],r=t[1],c=Object(s.useState)(!0),o=Object(i.a)(c,2),u=o[0],d=o[1];return Object(s.useEffect)((function(){if(!e)return function(){};var a=m.b.collection("usersData").where("userAdmin","==",e).onSnapshot((function(e){var a=e.docs.map((function(e){return Object(l.a)({},e.data())}));d(!1),r(a)}));return function(){a()}}),[e]),{users:n,loading:u}},p=function(e,a){var t=Object(i.a)(a,3),n=t[0],r=t[1],c=t[2],o=Object(s.useState)([]),u=Object(i.a)(o,2),d=u[0],p=u[1],b=Object(s.useState)(!0),E=Object(i.a)(b,2),f=E[0],v=E[1];return Object(s.useEffect)((function(){if(console.log("run"),!c)return function(){};var a=(c?m.b.collection(e).where(n,r,c):m.b.collection(e)).onSnapshot((function(e){var a=e.docs.map((function(e){return Object(l.a)({},e.data(),{id:e.id})}));f&&v(!1),p(a)}));return function(){a()}}),[n,r,c,e,f]),[d,f]},b=function(e,a){var t=Object(s.useState)([]),r=Object(i.a)(t,2),c=r[0],o=r[1],u=Object(s.useState)(!0),d=Object(i.a)(u,2),p=d[0],b=d[1],E=JSON.stringify(a);return Object(s.useEffect)((function(){if(!E)return function(){};var a=JSON.parse(E).where.reduce((function(e,a){return a?void 0===a[2]||null===a[2]?e:e.where.apply(e,Object(n.a)(a)):e}),m.b.collection(e)).onSnapshot((function(e){var a=e.docs.map((function(e){return Object(l.a)({},e.data(),{id:e.id})}));p&&b(!1),o(a)}));return function(){a()}}),[E,p,e]),[c,p]}},220:function(e,a,t){},229:function(e,a,t){},3:function(e,a,t){"use strict";t.d(a,"c",(function(){return c})),t.d(a,"b",(function(){return l})),t.d(a,"a",(function(){return o}));var n=t(135),r=t.n(n),c=(t(212),t(214),t(334),t(216),r.a.initializeApp({apiKey:"AIzaSyBeaiPGTpqqnlsooLCJifcNLOY_3VLFFBE",authDomain:"my-crm-b6839.firebaseapp.com",databaseURL:"https://my-crm-b6839.firebaseio.com",projectId:"my-crm-b6839",storageBucket:"my-crm-b6839.appspot.com",messagingSenderId:"737274129087",appId:"737274129087"})),l=c.firestore(),o={url:"https://my-crm-b6839.firebaseapp.com/signup",handleCodeInApp:!0}},320:function(e,a,t){},321:function(e,a,t){},322:function(e,a,t){},333:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(94),l=t.n(c);t(149),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=t(134);l.a.render(r.a.createElement(o.a,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},96:function(e,a,t){e.exports=t.p+"static/media/calculator.a08c3434.jpg"},97:function(e,a,t){e.exports=t.p+"static/media/sell.0367902a.jpg"},98:function(e,a,t){e.exports=t.p+"static/media/estadisticas.62170cb7.jpg"}},[[144,1,2]]]);
//# sourceMappingURL=main.891e05a6.chunk.js.map